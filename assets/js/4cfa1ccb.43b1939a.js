"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[780],{8453(e,n,i){i.d(n,{R:()=>r,x:()=>c});var s=i(6540);const l={},t=s.createContext(l);function r(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(t.Provider,{value:n},e.children)}},9399(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"overview/overview_architecture","title":"Architecture & Design","description":"Overview","source":"@site/../scurl-detector-docs/target/mdoc/overview/overview_architecture.md","sourceDirName":"overview","slug":"/overview/overview_architecture","permalink":"/scurl-detector/overview/overview_architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/lambdaworks/scurl-detector/edit/main/docs/overview/overview_architecture.md","tags":[],"version":"current","frontMatter":{"id":"overview_architecture","title":"Architecture & Design"},"sidebar":"docs","previous":{"title":"API Reference","permalink":"/scurl-detector/overview/overview_api"},"next":{"title":"FAQ & Troubleshooting","permalink":"/scurl-detector/overview/overview_faq"}}');var l=i(4848),t=i(8453);const r={id:"overview_architecture",title:"Architecture & Design"},c=void 0,a={},o=[{value:"Overview",id:"overview",level:2},{value:"Architecture",id:"architecture",level:2},{value:"High-Level Architecture",id:"high-level-architecture",level:3},{value:"Core Components",id:"core-components",level:3},{value:"1. UrlDetector",id:"1-urldetector",level:4},{value:"2. UrlDetectorOptions",id:"2-urldetectoroptions",level:4},{value:"3. URL Representation",id:"3-url-representation",level:4},{value:"Detection Pipeline",id:"detection-pipeline",level:2},{value:"Step-by-Step Processing",id:"step-by-step-processing",level:3},{value:"1. Preprocessing",id:"1-preprocessing",level:4},{value:"2. Candidate Detection",id:"2-candidate-detection",level:4},{value:"3. Normalization",id:"3-normalization",level:4},{value:"4. Parsing and Validation",id:"4-parsing-and-validation",level:4},{value:"5. Host Filtering",id:"5-host-filtering",level:4},{value:"6. Additional Validation",id:"6-additional-validation",level:4},{value:"Design Principles",id:"design-principles",level:2},{value:"1. Immutability",id:"1-immutability",level:3},{value:"2. Type Safety",id:"2-type-safety",level:3},{value:"3. Composability",id:"3-composability",level:3},{value:"4. Fail-Safe",id:"4-fail-safe",level:3},{value:"5. Performance",id:"5-performance",level:3},{value:"Dependencies",id:"dependencies",level:2},{value:"Core Dependencies",id:"core-dependencies",level:3},{value:"Cross-Compilation",id:"cross-compilation",level:3},{value:"Testing Strategy",id:"testing-strategy",level:2},{value:"Extension Points",id:"extension-points",level:2},{value:"Custom Validation",id:"custom-validation",level:3},{value:"Custom Detectors",id:"custom-detectors",level:3},{value:"Future Considerations",id:"future-considerations",level:2},{value:"Performance Characteristics",id:"performance-characteristics",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(n.p,{children:"Scala URL Detector is built on top of LinkedIn's URL Detector library, providing a functional, type-safe Scala API for extracting URLs from unstructured text. The library is designed with immutability, composability, and type safety as core principles."}),"\n",(0,l.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,l.jsx)(n.h3,{id:"high-level-architecture",children:"High-Level Architecture"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        User Code                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n                         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    UrlDetector API                           \u2502\n\u2502  (Immutable, Type-Safe Scala Interface)                     \u2502\n\u2502                                                               \u2502\n\u2502  \u2022 UrlDetector.extract(text: String)                        \u2502\n\u2502  \u2022 withAllowed/withDenied host filtering                    \u2502\n\u2502  \u2022 UrlDetectorOptions configuration                         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n                         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              URL Detection Pipeline                          \u2502\n\u2502                                                               \u2502\n\u2502  1. Preprocess special characters                           \u2502\n\u2502  2. Detect URL candidates (LinkedIn detector)               \u2502\n\u2502  3. Normalize URLs (encoding, protocols)                    \u2502\n\u2502  4. Parse and validate URLs (scala-uri)                     \u2502\n\u2502  5. Apply filtering (allowed/denied hosts)                  \u2502\n\u2502  6. Validate structure (TLD, email rejection, etc.)         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n                         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                 Set[AbsoluteUrl]                             \u2502\n\u2502            (Validated, Parsed URLs)                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,l.jsx)(n.h3,{id:"core-components",children:"Core Components"}),"\n",(0,l.jsx)(n.h4,{id:"1-urldetector",children:"1. UrlDetector"}),"\n",(0,l.jsx)(n.p,{children:"The main entry point and orchestrator for URL extraction."}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Responsibilities:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Configure detection options"}),"\n",(0,l.jsx)(n.li,{children:"Manage host filtering (allowed/denied lists)"}),"\n",(0,l.jsx)(n.li,{children:"Coordinate the detection pipeline"}),"\n",(0,l.jsx)(n.li,{children:"Ensure immutability through builder pattern"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Key Design:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Immutable: All modifications return new instances"}),"\n",(0,l.jsx)(n.li,{children:"Composable: Methods can be chained fluently"}),"\n",(0,l.jsx)(n.li,{children:"Thread-safe: Safe to share across threads"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",children:"case class UrlDetector(\n  options: UrlDetectorOptions,\n  allowedHosts: Option[NonEmptySet[Host]] = None,\n  deniedHosts: Set[Host] = Set.empty\n)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"2-urldetectoroptions",children:"2. UrlDetectorOptions"}),"\n",(0,l.jsx)(n.p,{children:"A sealed trait representing detection modes optimized for different content types."}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Design Pattern:"})," Sum Type (Sealed Trait + Case Objects)"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Compile-time exhaustiveness checking"}),"\n",(0,l.jsx)(n.li,{children:"Type-safe option selection"}),"\n",(0,l.jsx)(n.li,{children:"Clear, discoverable API"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Implementation:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",children:"sealed trait UrlDetectorOptions\n\nobject UrlDetectorOptions {\n  case object Default extends UrlDetectorOptions\n  case object QuoteMatch extends UrlDetectorOptions\n  case object SingleQuoteMatch extends UrlDetectorOptions\n  case object BracketMatch extends UrlDetectorOptions\n  case object Json extends UrlDetectorOptions\n  case object Javascript extends UrlDetectorOptions\n  case object Xml extends UrlDetectorOptions\n  case object Html extends UrlDetectorOptions\n  case object AllowSingleLevelDomain extends UrlDetectorOptions\n}\n"})}),"\n",(0,l.jsx)(n.h4,{id:"3-url-representation",children:"3. URL Representation"}),"\n",(0,l.jsxs)(n.p,{children:["Uses ",(0,l.jsx)(n.a,{href:"https://github.com/lemonlabsuk/scala-uri",children:"scala-uri"})," for type-safe URL representation."]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Why scala-uri:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Type-safe parsing and construction"}),"\n",(0,l.jsx)(n.li,{children:"Rich API for URL manipulation"}),"\n",(0,l.jsx)(n.li,{children:"Immutable data structures"}),"\n",(0,l.jsx)(n.li,{children:"Well-tested and maintained"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Key Types:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"AbsoluteUrl"}),": Fully qualified URLs with scheme and host"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Host"}),": Represents URL hosts with subdomain handling"]}),"\n",(0,l.jsx)(n.li,{children:"URL components accessible via methods (path, query, fragment, etc.)"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"detection-pipeline",children:"Detection Pipeline"}),"\n",(0,l.jsx)(n.h3,{id:"step-by-step-processing",children:"Step-by-Step Processing"}),"\n",(0,l.jsx)(n.h4,{id:"1-preprocessing",children:"1. Preprocessing"}),"\n",(0,l.jsx)(n.p,{children:"Before URL detection, the text is preprocessed to handle special characters:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",children:'// Handles URLs prefixed with special characters like #, @, !, $, ~, *\n// Example: "#https://example.com" \u2192 "https://example.com"\nprivate val SpecialCharPrefixPattern = "([@#!$~*]+)(.*)"\n'})}),"\n",(0,l.jsx)(n.h4,{id:"2-candidate-detection",children:"2. Candidate Detection"}),"\n",(0,l.jsx)(n.p,{children:"Uses LinkedIn's URL Detector (Java library) to identify potential URLs:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Leverages battle-tested URL detection logic"}),"\n",(0,l.jsx)(n.li,{children:"Handles various URL formats and edge cases"}),"\n",(0,l.jsx)(n.li,{children:"Language-agnostic detection algorithm"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"3-normalization",children:"3. Normalization"}),"\n",(0,l.jsx)(n.p,{children:"Normalizes detected URLs:"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Encoded Spaces:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",children:'// Converts %20 to spaces for easier processing\nurl.replace("%20", " ")\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Protocol-Relative URLs:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",children:'// Converts //example.com \u2192 http://example.com\nif (url.startsWith("//")) s"http:$url"\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Default Scheme:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",children:'// Adds http:// if no scheme present\nif (!hasScheme(url)) s"http://$url"\n'})}),"\n",(0,l.jsx)(n.h4,{id:"4-parsing-and-validation",children:"4. Parsing and Validation"}),"\n",(0,l.jsx)(n.p,{children:"Uses scala-uri to parse URLs with error handling:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",children:"Try(AbsoluteUrl.parse(normalizedUrl)) match {\n  case Success(url) => Some(url)\n  case Failure(_) => None  // Gracefully skip invalid URLs\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Validation Checks:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"URL structure validity"}),"\n",(0,l.jsx)(n.li,{children:"Host format validation"}),"\n",(0,l.jsx)(n.li,{children:"Port number validation (if present)"}),"\n",(0,l.jsx)(n.li,{children:"Path encoding validation"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"5-host-filtering",children:"5. Host Filtering"}),"\n",(0,l.jsx)(n.p,{children:"Applies allowed/denied host filtering with intelligent subdomain matching:"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Matching Rules:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Apex domain matching: ",(0,l.jsx)(n.code,{children:"example.com"})," matches ",(0,l.jsx)(n.code,{children:"www.example.com"}),", ",(0,l.jsx)(n.code,{children:"api.example.com"})]}),"\n",(0,l.jsx)(n.li,{children:"www is implicitly assumed"}),"\n",(0,l.jsx)(n.li,{children:"Explicit subdomain matching available"}),"\n",(0,l.jsx)(n.li,{children:"Denied hosts take precedence over allowed hosts"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Implementation:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",children:'def matchesHost(url: AbsoluteUrl, host: Host): Boolean = {\n  val urlHost = url.host\n  urlHost == host ||\n  urlHost.toString.endsWith(s".${host}") ||\n  urlHost.toString == s"www.${host}"\n}\n'})}),"\n",(0,l.jsx)(n.h4,{id:"6-additional-validation",children:"6. Additional Validation"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Email Rejection:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",children:"// Uses Apache Commons Validator\n!EmailValidator.getInstance().isValid(urlString)\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"TLD Validation:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Validates against public suffix list"}),"\n",(0,l.jsx)(n.li,{children:"Ensures URLs have valid top-level domains"}),"\n",(0,l.jsxs)(n.li,{children:["Can be bypassed with ",(0,l.jsx)(n.code,{children:"AllowSingleLevelDomain"})," option"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Userinfo Validation:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"URLs with user credentials must have explicit schemes"}),"\n",(0,l.jsxs)(n.li,{children:["Prevents ",(0,l.jsx)(n.code,{children:"user:pass@example.com"})," from being detected (could be email)"]}),"\n",(0,l.jsxs)(n.li,{children:["Allows ",(0,l.jsx)(n.code,{children:"ftp://user:pass@example.com"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Special Character Cleanup:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",children:'// Removes leading/trailing special characters\nprivate val SanitizeRegex = "^[@#!$,\\\\-`.~*/]+|[@#!$,\\\\-`.~*/]+$"\n'})}),"\n",(0,l.jsx)(n.h2,{id:"design-principles",children:"Design Principles"}),"\n",(0,l.jsx)(n.h3,{id:"1-immutability",children:"1. Immutability"}),"\n",(0,l.jsx)(n.p,{children:"All data structures are immutable:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",children:"// Returns a NEW detector instance\ndef withAllowed(host: Host, hosts: Host*): UrlDetector = {\n  copy(allowedHosts = Some(NonEmptySet.of(host, hosts: _*)))\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Thread-safe by default"}),"\n",(0,l.jsx)(n.li,{children:"Easier to reason about"}),"\n",(0,l.jsx)(n.li,{children:"No defensive copying needed"}),"\n",(0,l.jsx)(n.li,{children:"Referential transparency"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"2-type-safety",children:"2. Type Safety"}),"\n",(0,l.jsx)(n.p,{children:"Leverages Scala's type system:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",children:"// Sealed trait ensures all options are known at compile time\nsealed trait UrlDetectorOptions\n\n// Distinct types for different URL categories\ntrait AbsoluteUrl  // Has scheme and host\ntrait RelativeUrl  // Missing scheme or host\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Compile-time guarantees"}),"\n",(0,l.jsx)(n.li,{children:"IDE autocomplete and navigation"}),"\n",(0,l.jsx)(n.li,{children:"Refactoring safety"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"3-composability",children:"3. Composability"}),"\n",(0,l.jsx)(n.p,{children:"Fluent API design for easy composition:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",children:'val detector = UrlDetector(UrlDetectorOptions.Html)\n  .withAllowed(Host.parse("example.com"))\n  .withDenied(Host.parse("ads.example.com"))\n  .extract(htmlContent)\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Readable, declarative code"}),"\n",(0,l.jsx)(n.li,{children:"Easy to build complex configurations"}),"\n",(0,l.jsx)(n.li,{children:"Natural expression of intent"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"4-fail-safe",children:"4. Fail-Safe"}),"\n",(0,l.jsx)(n.p,{children:"Graceful error handling throughout:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",children:"// Invalid URLs are filtered out, not thrown as exceptions\nTry(AbsoluteUrl.parse(url)) match {\n  case Success(parsed) => Some(parsed)\n  case Failure(_) => None\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"No unexpected exceptions during extraction"}),"\n",(0,l.jsx)(n.li,{children:"Robust against malformed input"}),"\n",(0,l.jsx)(n.li,{children:"Predictable behavior"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"5-performance",children:"5. Performance"}),"\n",(0,l.jsx)(n.p,{children:"Performance considerations:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Lazy Initialization"}),": Default detector created lazily"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Efficient Collections"}),": Uses ",(0,l.jsx)(n.code,{children:"Set"})," for O(1) lookups and deduplication"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Minimal Allocations"}),": Reuses detector instances"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Regex Compilation"}),": Patterns compiled once at class load"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",children:"object UrlDetector {\n  lazy val default: UrlDetector = UrlDetector(UrlDetectorOptions.Default)\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,l.jsx)(n.h3,{id:"core-dependencies",children:"Core Dependencies"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"LinkedIn URL Detector (0.1.23)"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Provides core URL detection algorithm"}),"\n",(0,l.jsx)(n.li,{children:"Java library with proven detection logic"}),"\n",(0,l.jsx)(n.li,{children:"Handles complex URL patterns and edge cases"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"scala-uri (4.2.0)"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Type-safe URL parsing and manipulation"}),"\n",(0,l.jsx)(n.li,{children:"Rich API for URL components"}),"\n",(0,l.jsx)(n.li,{children:"Well-tested URL handling"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Apache Commons Validator (1.10.1)"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Email validation"}),"\n",(0,l.jsx)(n.li,{children:"Domain validation"}),"\n",(0,l.jsx)(n.li,{children:"IP address validation"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Cats (NonEmptySet)"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Type-safe non-empty collections"}),"\n",(0,l.jsx)(n.li,{children:"Used for allowed hosts (ensures at least one host)"}),"\n",(0,l.jsx)(n.li,{children:"Functional programming utilities"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"cross-compilation",children:"Cross-Compilation"}),"\n",(0,l.jsx)(n.p,{children:"Supports Scala 2.12, 2.13, and 3.x:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",children:'// build.sbt\ncrossScalaVersions := Seq("2.12.21", "2.13.18", "3.7.4")\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Compatibility:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Uses scala-collection-compat for cross-version compatibility"}),"\n",(0,l.jsx)(n.li,{children:"Tested against all supported Scala versions"}),"\n",(0,l.jsx)(n.li,{children:"Binary compatible within major versions"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"testing-strategy",children:"Testing Strategy"}),"\n",(0,l.jsx)(n.p,{children:"Comprehensive test coverage using ScalaTest:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",children:"class UrlDetectorSpec extends AnyWordSpec with Matchers {\n  // Tests for each detection option\n  // Tests for host filtering\n  // Tests for edge cases (IPv6, encoded URLs, etc.)\n  // Tests for error handling\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Test Categories:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Detection option behavior"}),"\n",(0,l.jsx)(n.li,{children:"Host filtering logic"}),"\n",(0,l.jsx)(n.li,{children:"URL normalization"}),"\n",(0,l.jsx)(n.li,{children:"Edge cases and malformed input"}),"\n",(0,l.jsx)(n.li,{children:"Integration scenarios"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"extension-points",children:"Extension Points"}),"\n",(0,l.jsx)(n.p,{children:"The library can be extended:"}),"\n",(0,l.jsx)(n.h3,{id:"custom-validation",children:"Custom Validation"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",children:"def customExtract(text: String): Set[AbsoluteUrl] = {\n  val urls = UrlDetector.default.extract(text)\n  urls.filter(customValidation)\n}\n\ndef customValidation(url: AbsoluteUrl): Boolean = {\n  // Your custom validation logic\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"custom-detectors",children:"Custom Detectors"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",children:'object CustomDetectors {\n  lazy val intranet: UrlDetector =\n    UrlDetector(UrlDetectorOptions.AllowSingleLevelDomain)\n      .withAllowed(Host.parse("corp"))\n\n  lazy val production: UrlDetector =\n    UrlDetector(UrlDetectorOptions.Html)\n      .withDenied(\n        Host.parse("localhost"),\n        Host.parse("127.0.0.1")\n      )\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"future-considerations",children:"Future Considerations"}),"\n",(0,l.jsx)(n.p,{children:"Potential areas for enhancement:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Async API"}),": Support for asynchronous URL extraction"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Streaming"}),": Process large documents as streams"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Custom Validators"}),": Plugin architecture for validation rules"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Caching"}),": Optional caching for repeated extractions"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Metrics"}),": Built-in performance metrics and monitoring"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Custom TLD Lists"}),": Allow custom public suffix lists"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"performance-characteristics",children:"Performance Characteristics"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Time Complexity:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Detection: O(n) where n is text length"}),"\n",(0,l.jsx)(n.li,{children:"Host filtering: O(m \xd7 h) where m is number of URLs, h is number of hosts"}),"\n",(0,l.jsx)(n.li,{children:"Overall: O(n + m \xd7 h)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Space Complexity:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"O(m) where m is number of detected URLs"}),"\n",(0,l.jsx)(n.li,{children:"Set deduplication: O(m) space for unique URLs"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Optimization Tips:"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Reuse detector instances (avoid creating new ones)"}),"\n",(0,l.jsx)(n.li,{children:"Apply host filters to reduce result set size"}),"\n",(0,l.jsx)(n.li,{children:"Use specific detection options to reduce false positives"}),"\n",(0,l.jsx)(n.li,{children:"For large texts, consider parallel processing"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}}}]);